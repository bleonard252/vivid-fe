<!doctype html>
<head>
	<title>ttk_vivid_master.html</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.light_blue-indigo.min.css">
	<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" href="ttk.css" type="text/css">
	<script src="https://raw.githubusercontent.com/Kirschn/mastodon.js/master/mastodon.js"></script>
	<meta charset="UTF-16">
</head>
<body>
	<script>
		var api = new MastodonAPI({
			instance: "https://mastodon.social",
			api_user_token: ""
		});
		api.registerApplication("Vivid frontend",
                window.location.href, // redirect uri, we will need this later on
                ["read", "write", "follow"], //scopes
                "https://bleonard252.github.io/vivid-fe/index.html", //website on the login screen
                function(data) {
                    // we got our application
                    // lets save it to our browser storage
                    localStorage.setItem("mastodon_client_id", data["client_id"]);
                    localStorage.setItem("mastodon_client_secret", data["client_secret"]);
                    localStorage.setItem("mastodon_client_redirect_uri", data["redirect_uri"]);
                    // now, that we have saved our application data, generate an oauth url and send
                    // our user to it!
                    window.location.href = api.generateAuthLink(data["client_id"],
                        data["redirect_uri"],
                        "code", // oauth method
                        ["read", "write", "follow"] //scopes
                    );
                }
            );
            // now we get to the part why the redirect uri was set to our current location
            // we can just access to code from the url hash
            if (window.location.href.indexOf("?code=") !== -1) {
                // nice, we got our auth code!
                // lets put it into a variable
                var authCode = window.location.href.replace(window.location.origin + window.location.pathname + "?code=", "");
                // nice variable clusterfuck, eh?
                // we have everything needed to access our oauth token
                api.getAccessTokenFromAuthCode(
                    localStorage.getItem("mastodon_client_id"),
                    localStorage.getItem("mastodon_client_secret"),
                    localStorage.getItem("mastodon_client_redirect_uri"),
                    authCode,
                    function(data) {
                        // AAAND DATA CONTAINS OUR TOKEN!
                        api.setConfig("api_user_token", data.token) //to set it without having to reinit the entire
                        // library.
                    }
                )
            }
	</script>
	<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--fixed-tabs">
	    <header class="mdl-layout__header ttk-navbar mdl-color--white mdl-shadow--8dp">
            <!-- Tabs -->
            <div class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--white">
              <a href="#ttk-tab-profile" class="mdl-layout__tab"><i class="material-icons ttk-icon-mid">person</i></a>
              <a href="#ttk-tab-home" class="mdl-layout__tab is-active"><i class="material-icons ttk-icon-mid">home</i></a>
              <a href="#ttk-tab-friends" class="mdl-layout__tab"><i class="material-icons ttk-icon-mid">group</i></a>
            </div>
        </header>
        <main class="vivid-wrapper mdl-layout__content">
			<div class="demo-card-square mdl-card mdl-shadow--2dp">
			  <div class="mdl-card__title ttk-card-title">
				<span class="mdl-chip mdl-chip--contact">
					<img class="mdl-chip__contact" src="https://lh3.googleusercontent.com/-hdfzHrXy_u4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8VvK48idQSBpu8Ke8M_SQF6ITxg/s128-c-mo/photo.jpg" />
					<span class="mdl-chip__text">Blake Leonard</span>
				</span>&nbsp;
				<span class="mdl-chip mdl-color--orange">
					<span class="mdl-chip__text">Admin</span>
				</span>&nbsp;
				<span class="mdl-chip mdl-color--light-blue">
					<span class="mdl-chip__text">Developer</span>
				</span>&nbsp;
			  </div>
			  <div class="mdl-card__title ttk-card-padless vivid-emo mdl-color-text--grey">
				System message
			  </div>
			  <div class="mdl-card__supporting-text">
				<span class="mdl-color-text--red"><i class="material-icons ttk-icon-mid">warning</i> WARNING!</span> This is a UI demo ONLY! Much of Project Teletalk's functionality hasn't been implemented yet! Based on Material Design Lite.
			  </div>
			  <div class="mdl-card__actions mdl-card--border" style="display:flex">
				<a class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-color-text--grey" id="post_like_sys" onclick="toggle_like('post_like_sys')">
				  <i class="material-icons">favorite</i>
				</a>
				<span class="mdl-layout-spacer"></span>
				<button class="mdl-button mdl-js-button mdl-button--disabled mdl-js-ripple-effect mdl-color-text--grey" disabled id="post_readmore_sys">
				  SYSTEM MSG
				</button>
			  </div>
			</div>
			<br />
			
      <section class="mdl-layout__tab-panel is-active" id="ttk-tab-home">
				<div class="page-content">
					<div class="demo-card-square mdl-card mdl-shadow--2dp">
					  <div class="mdl-card__title ttk-card-title">
							<span class="mdl-chip__text">Post as</span>&nbsp;&nbsp;
							<img class="mdl-chip__contact" src="https://lh3.googleusercontent.com/-hdfzHrXy_u4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8VvK48idQSBpu8Ke8M_SQF6ITxg/s128-c-mo/photo.jpg"></img>
							<span class="mdl-chip__text">Blake Leonard</span>
					  </div>
					  <div class="mdl-card__supporting-text ttk-card-padless">
							<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
								<label class="mdl-textfield__label" for="postbox">Post something!</label>
								<textarea class="mdl-textfield__input" type="text" rows="3" id="postbox"></textarea>
							</div>
					  </div>
					  <div class="mdl-card__actions mdl-card--border">
							<span class="mdl-layout-spacer"></span>
							<button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue" id="post_dopost"
							onclick='mast.post("statuses", {status:$("#postbox").value}, function (data) {})'>
								POST
							</button>
					  </div>
					</div>
					<br />
					<div class="demo-card-square mdl-card mdl-shadow--2dp">
					  <div class="mdl-card__title ttk-card-title">
						<span class="mdl-chip mdl-chip--contact">
							<img class="mdl-chip__contact" src="https://lh3.googleusercontent.com/-hdfzHrXy_u4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8VvK48idQSBpu8Ke8M_SQF6ITxg/s128-c-mo/photo.jpg"></img>
							<span class="mdl-chip__text">Blake Leonard</span>
						</span>&nbsp;
						<span class="mdl-chip mdl-color--orange">
							<span class="mdl-chip__text">Admin</span>
						</span>&nbsp;
						<span class="mdl-chip mdl-color--light-blue">
							<span class="mdl-chip__text">Developer</span>
						</span>&nbsp;
					  </div>
					  <div class="mdl-card__title ttk-card-padless vivid-emo mdl-color-text--grey">
						&#x1f914; Feeling thoughtful
					  </div>
					  <div class="mdl-card__supporting-text">
						I like to post things on this platform. It makes me feel warm and fuzzy inside knowing that one day my work will be discovered.
					  </div>
					  <div class="mdl-card__actions mdl-card--border">
						<a class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-color-text--grey" id="post_like_97" onclick="toggle_like('post_like_97')">
						  <i class="material-icons">favorite</i>
						</a>
					  </div>
					</div>
					<br />
					<div class="demo-card-square mdl-card mdl-shadow--2dp">
					  <div class="mdl-card__title ttk-card-title">
						<span class="mdl-chip mdl-chip--contact">
							<img class="mdl-chip__contact" src="https://pbs.twimg.com/profile_images/874276197357596672/kUuht00m_400x400.jpg"></img>
							<span class="mdl-chip__text">Donald Trump</span>
						</span>&nbsp;
						<span class="mdl-chip mdl-color--indigo mdl-color-text--white">
							<span class="mdl-chip__text">Verified</span>
						</span>
					  </div>
					  <div class="mdl-card__supporting-text">
						Will be landing soon. Looking forward to seeing our next Senator from Montana, Matt Rosendale. He will represent our Country well, far better than Jon Tester who will vote with Cryin' Chuck Schumer and Nancy Pelosi - never with us!
					  </div>
					  <div class="mdl-card__actions mdl-card--border">
						<a class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-color-text--grey" id="post_like_102" onclick="toggle_like('post_like_102')">
						  <i class="material-icons">favorite</i>
						</a>
					  </div>
					</div>
					
					<br />
					<div class="demo-card-square mdl-card mdl-shadow--2dp">
					  <div class="mdl-card__title ttk-card-title">
						<span class="mdl-chip mdl-chip--contact">
							<img class="mdl-chip__contact" src="https://lh3.googleusercontent.com/-hdfzHrXy_u4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8VvK48idQSBpu8Ke8M_SQF6ITxg/s128-c-mo/photo.jpg"></img>
							<span class="mdl-chip__text">Blake Leonard</span>
						</span>&nbsp;
						<span class="mdl-chip mdl-chip--contact mdl-color--green">
							<span class="mdl-chip__contact mdl-color--red">F</span>
							<span class="mdl-chip__text"><em>Group</em> Member</span>
						</span>&nbsp;
					  </div>
					  <div class="mdl-card__title ttk-card-padless vivid-emo mdl-color-text--grey">
						Group: FSM Caswell Fall 2018<br />
						Group Collection: Trip Photos
					  </div>
					  <div class="mdl-card__actions mdl-card--border">
						<a class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-color-text--grey" id="post_like_121" onclick="toggle_like('post_like_121')">
						  <i class="material-icons">favorite</i>
						</a>
					  </div>
				</div></div>
      </section>
			<section class="mdl-layout__tab-panel" id="ttk-tab-profile">
              <div class="page-content">
              	<div class="mdl-card demo-card-square mdl-shadow--2dp">
										<div class="mdl-card__title">
											Profile page
										</div>
										<div class="mdl-card__supporting-text">
											Whoops! The profile page is missing.
										</div>
                </div>
              </div>
            </section>
      <section class="mdl-layout__tab-panel" id="ttk-tab-friends">
      <div class="page-content">
				<div class="demo-card-event demo-card-square mdl-card mdl-shadow--2dp mdl-color--red mdl-color-text--white">
				<div class="mdl-card__title mdl-card--expand">
				<span class="mdl-color-text--white">
					<em>Wade Martin</em><br />
					is holding an event<br />
					<em>Pep Rally</em><br />
					Friday, October 12, 2018<br />
					1:30pm - 2:15pm
				</span>
				</div>
				<div class="mdl-card__supporting-text mdl-color-text--white">
					Pep Rally will support our Sports Teams and sport some performances
				</div>
				<div class="mdl-card__actions mdl-card--border">
				<a class="mdl-button mdl-color-text--white mdl-js-button mdl-js-ripple-effect">
					Add to Calendar
				</a>
				</div>
			</div><br />
			
			<div class="mdl-card demo-card-square mdl-shadow--2dp">
				<div class="mdl-card__title vivid-t-nopad">
					<h4>Project Teletalk Tips</h4>
				</div>
				<div class="mdl-card__supporting-text">
					Project Teletalk is constantly evolving. These UI demos are examples of what elements of the Project Teletalk UI will look like.
				</div>
				<div class="mdl-card__actions">
					<a href="https://project.b252.gq/teletalk/" class="mdl-button mdl-js-button mdl-js-ripple-effect">More</a>
				</div>
			</div><br />
			
			<div class="mdl-card demo-card-square mdl-shadow--2dp">
				<div class="mdl-card__title vivid-t-nopad mdl-card--border">
					<h4>Stories</h4>
				</div>
				<div class="mdl-card__supporting-text">
					Stories are not yet available. Check back later!
				</div>
			</div></div>
    	</section>
    </main>
	</div>
	<script>
		function toggle_like(ename) {
			if ($("#"+ename).hasClass("mdl-color-text--grey")) {
				$("#"+ename).removeClass("mdl-color-text--grey");
				$("#"+ename).addClass("mdl-color-text--red");
			} else {
				$("#"+ename).addClass("mdl-color-text--grey");
				$("#"+ename).removeClass("mdl-color-text--red");
			}
		}
	</script>
</body>

<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  <title>Mastodon: Choose an instance</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons'>
  <link rel='stylesheet' href='https://code.getmdl.io/1.1.3/material.indigo-green.min.css'>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>

  <div class="mdl-layout mdl-js-layout">

    <section class="container">
                <div class="mdl-card mdl-shadow--6dp">
                    <div class="mdl-card__title mdl-color--primary mdl-color-text--white relative">
                        <h2 class="mdl-card__title-text">Choose an instance</h2>
                    </div>

                    <div class="mdl-card__supporting-text">
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <select class="mdl-textfield__input" id="inst-choose">
                            <optgroup label="Special"></optgroup>
                            <optgroup label="Featured">
                                <option>mastodon.social</option>
                                <option>mastodon.host</option>
                            </optgroup>
                            <optgroup id="inst-list" label="Instances"></optgroup>
                        </select>
                            <script>
                                $.get("https://instances.social/list.json",{},function(data,x,y){
                                    data.instances.forEach(function(inst){if (inst.mastodon == true)
                                        {document.getElementById("inst-list").innerHTML = document.getElementById("inst-list").innerHTML +
                                        `<option>${inst.name}</option>`;}
                                    })
                                })
                            </script>
                            <label class="mdl-textfield__label" for="inst-choose">Instance</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label invisible">
                                <input disabled type=text value="Spacer">
                                <label class="mdl-textfield__label" for="inst-choose">Spacer</label>
                        </div>
                    </div>

                    <div class="mdl-card__actions mdl-card--border">
                        <div class="mdl-grid">
                            <button class="mdl-cell mdl-cell--12-col mdl-button mdl-button--raised mdl-button--colored mdl-js-button mdl-js-ripple-effect mdl-color-text--white"
                            onclick="localStorage.clear();localStorage.setItem('mastodon_instance','https://'+$('#inst-choose :selected').text());location.assign('index.html')">
                                Login
                            </button>

                        </div>

                        <div class="mdl-grid">
                            <div class="mdl-cell mdl-cell--12-col">
                                <a onClick='flip("show-left")' class="mdl-color-text--primary">Sign up!</a>
                                <a onClick='flip("show-bottom")' class="mdl-color-text--primary" style="float: right">Lost
                                    Password?</a>
                            </div>
                        </div>
                    </div>
                </div>
    </section>
</div>
  <script src='https://code.getmdl.io/1.1.3/material.min.js'></script>
<script src='https://code.jquery.com/jquery-2.2.4.min.js'></script>

  

    <script  src="js/index.js"></script>




</body>

</html>
